{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\n\nconst refs = {\n  searchGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('.load-btn-js'),\n};\n\nconst createGalleryItem = ({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `<li class=\"gallery-item\">\n             <a href =\"${largeImageURL}\">\n             <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"/> \n             </a> \n\n            <ul class = \"img-info-list\">\n            <li class=\"img-info-item\"><span class=\"img-item-desc\">Likes</span> ${likes}</li>\n            <li class=\"img-info-item\"><span class=\"img-item-desc\">Vievs </span> ${views}</li>\n            <li class=\"img-info-item\"><span class=\"img-item-desc\">Comments </span> ${comments}</li>\n            <li class=\"img-info-item\"><span class=\"img-item-desc\">Downloads</span> ${downloads}</li>\n            </ul>\n\n          </li>`;\n};\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const createGallery = images => {\n  const markup = images.map(imgItem => createGalleryItem(imgItem)).join('');\n\n  refs.searchGallery.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n};\n\nexport const clearGallery = () => (refs.searchGallery.innerHTML = '');\n\nexport const showLoader = () => {\n  refs.loader.classList.remove('is-hidden');\n};\nexport const hideLoader = () => {\n  refs.loader.classList.add('is-hidden');\n};\n\nexport const showLoadMoreButton = () => {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n  refs.loadMoreBtn.classList.add('is-hidden');\n};\n","import axios from 'axios';\n\nconst API_KEY = '53395208-f197eaad794bdfcff5070dc5e';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nexport const getImagesByQuery = async (query, page) => {\n  const requestParams = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: PER_PAGE,\n  };\n\n  const response = await axios.get(BASE_URL, {\n    params: requestParams,\n  });\n  const { data } = response;\n  return data;\n\n  // .then(response => response.data);\n};\n","import iziToast from 'izitoast';\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport { PER_PAGE, getImagesByQuery } from './js/pixabay-api';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  searchGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('.load-btn-js'),\n};\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  hideLoadMoreButton();\n\n  const { target: searchForm } = event;\n\n  const userInput = searchForm.elements['search-text'].value.trim();\n\n  if (userInput === '') {\n    iziToast.error({\n      message: 'Pleace enter what are you searching for',\n      position: 'topRight',\n    });\n    return;\n  }\n  currentQuery = userInput;\n  currentPage = 1;\n\n  showLoader();\n  try {\n    const { hits, totalHits } = await getImagesByQuery(\n      currentQuery,\n      currentPage\n    );\n\n    if (hits.length === 0) {\n      clearGallery();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n    clearGallery();\n    createGallery(hits);\n\n    if (currentPage * PER_PAGE >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"Were sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n    // showLoadMoreButton();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    hideLoader();\n    refs.form.reset();\n  }\n};\n\nconst onLoadBtnClick = async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(\n      currentQuery,\n      currentPage\n    );\n\n    if (hits.length === 0) {\n      hideLoadMoreButton();\n      return;\n    }\n    createGallery(hits);\n\n    if (currentPage * PER_PAGE >= totalHits) {\n      iziToast.info({\n        message: \"Were sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n    const сard = refs.searchGallery.firstElementChild;\n    const cardRect = сard.getBoundingClientRect();\n    const cardHeight = cardRect.height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    console.log(err);\n  } finally {\n    hideLoader();\n  }\n};\n\nrefs.form.addEventListener('submit', onSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadBtnClick);\n"],"names":["refs","createGalleryItem","largeImageURL","webformatURL","tags","likes","views","comments","downloads","gallery","SimpleLightbox","createGallery","images","markup","imgItem","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","requestParams","response","axios","data","currentPage","currentQuery","onSearchFormSubmit","event","searchForm","userInput","iziToast","hits","totalHits","err","onLoadBtnClick","cardHeight"],"mappings":"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"}